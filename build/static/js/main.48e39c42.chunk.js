(this.webpackJsonpsrisuvit_mobile=this.webpackJsonpsrisuvit_mobile||[]).push([[0],{107:function(e,t,n){"use strict";n.r(t);var a=n(12),s=n.n(a),r=n(46),c=n.n(r),i=(n(56),n(9)),o=n.n(i),u=n(14),l=n(47),d=n(48),p=n(3),h=n(51),m=n(50),b=(n(58),n.p+"static/media/logo.351b11d1.png"),f=n.p+"static/media/tower.25cf83b1.png",j=n.p+"static/media/rocket.b93caf60.png",v=n.p+"static/media/srisuvit.a42f099e.png",y=n.p+"static/media/start_game.80a3b953.png",g=n.p+"static/media/send_ans.f707aa89.png",O=n.p+"static/media/score.4c3f1143.png",w=n(2),x=n.n(w),N=n(49),_=n.n(N),k=n(15),I=n.n(k),A=function(e){return new Promise((function(t,n){I.a.get(x.a.GAME_END_POINT+x.a.GAME_URL,{headers:{authorization:e}}).then((function(e){var n=e.data;t(n)})).catch((function(e){return t(e)}))}))},C=function(e){return new Promise((function(t,n){I.a.post(x.a.PLAYER_END_POINT+x.a.PLAYER_URL,e).then((function(e){t(e)})).catch((function(e){return t(e)}))}))},S=function(e,t){return new Promise((function(n,a){I.a.put(x.a.PLAYER_END_POINT+x.a.PLAYER_URL+"/"+e,t).then((function(e){n(e)})).catch((function(e){return n(e)}))}))},T=n(22),D=n.n(T),E=function(e,t,n){D.a.fire(t,n,e)},G=function(e,t,n){return new Promise((function(a,s){D.a.fire({title:t,text:n,icon:e,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"\u0e22\u0e37\u0e19\u0e22\u0e31\u0e19",cancelButtonText:"\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01"}).then((function(e){return a(e)}))}))},P=n(0),H=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={page:0,playerName:"",playerID:"",countdown:0,question:"",answers:"",playerScore:0,codeGame:"",baseID:0,allTime:0,playerTime:0},a.startGameHandle=a.startGameHandle.bind(Object(p.a)(a)),a.readCodeGame=a.readCodeGame.bind(Object(p.a)(a)),a.onQuestion=a.onQuestion.bind(Object(p.a)(a)),a.sendAnswerHandle=a.sendAnswerHandle.bind(Object(p.a)(a)),a.onCountdown=a.onCountdown.bind(Object(p.a)(a)),a.onAnswersHandle=a.onAnswersHandle.bind(Object(p.a)(a)),a.onAndGameHandle=a.onAndGameHandle.bind(Object(p.a)(a)),a.loop=-1,a}return Object(d.a)(n,[{key:"onConnect",value:function(){console.log("\u0e40\u0e0a\u0e37\u0e48\u0e2d\u0e21\u0e15\u0e48\u0e2d Server \u0e41\u0e25\u0e49\u0e27")}},{key:"onDisconnect",value:function(){console.log("\u0e1b\u0e34\u0e14\u0e01\u0e32\u0e23\u0e40\u0e0a\u0e37\u0e48\u0e2d\u0e21\u0e15\u0e48\u0e2d\u0e41\u0e25\u0e49\u0e27")}},{key:"onQuestion",value:function(e){this.setState({question:e,answers:""})}},{key:"componentDidMount",value:function(){this.socket=_()(x.a.SOCKET_IO_END_POINT),this.socket.on("connect",this.onConnect),this.socket.on("disconnect",this.onDisconnect),this.socket.on("question",this.onQuestion),this.socket.on("countdown",this.onCountdown),this.socket.on("answers",this.onAnswersHandle),this.socket.on("endGame",this.onAndGameHandle),this.readCodeGame()}},{key:"readCodeGame",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A("no_token");case 2:(t=e.sent).length>0&&this.setState({codeGame:t[0].code_game});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"startGameHandle",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==this.state.playerName&&""!==this.state.playerID){e.next=3;break}return E("warning","\u0e41\u0e08\u0e49\u0e07\u0e40\u0e15\u0e37\u0e2d\u0e19","\u0e01\u0e23\u0e38\u0e13\u0e32\u0e23\u0e30\u0e1a\u0e38\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e1c\u0e39\u0e49\u0e40\u0e25\u0e48\u0e19\u0e43\u0e2b\u0e49\u0e04\u0e23\u0e1a\u0e16\u0e49\u0e27\u0e19"),e.abrupt("return");case 3:if(""!==this.state.codeGame){e.next=6;break}return E("error","\u0e40\u0e01\u0e34\u0e14\u0e02\u0e49\u0e2d\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14","\u0e40\u0e01\u0e34\u0e14\u0e02\u0e49\u0e2d\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14\u0e43\u0e19\u0e01\u0e32\u0e23\u0e40\u0e0a\u0e37\u0e48\u0e2d\u0e21\u0e15\u0e48\u0e2d Server"),e.abrupt("return");case 6:return t={name:this.state.playerName,player_id:this.state.playerID,code_game:this.state.codeGame},e.next=9,C(t);case 9:201===(n=e.sent).status?this.setState({baseID:n.data.id,page:1}):E("error","\u0e40\u0e01\u0e34\u0e14\u0e02\u0e49\u0e2d\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14","\u0e40\u0e01\u0e34\u0e14\u0e02\u0e49\u0e2d\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14\u0e43\u0e19\u0e01\u0e32\u0e23\u0e40\u0e0a\u0e37\u0e48\u0e2d\u0e21\u0e15\u0e48\u0e2d Server");case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onCountdown",value:function(e){var t=this;this.setState({allTime:e});var n=e;this.loop=setInterval((function(){n<=0&&(clearInterval(t.loop),t.setState((function(e){return{playerTime:e.playerTime+t.state.allTime}}))),t.setState({countdown:n}),n--}),1e3)}},{key:"onAnswersHandle",value:function(e){var t=function(e){return e.toUpperCase().trim()},n=e.split(","),a=this.state.answers.split(",");n=n.map(t),a=a.map(t);var s=[];n.forEach((function(e){for(var t=0;t<a.length&&!(t>=5);t++)e===a[t]&&s.push(e.trim())})),s.length>0&&this.setState((function(e){return{playerScore:e.playerScore+s.length}})),this.setState({question:"",countdown:0,answers:""}),clearInterval(this.loop)}},{key:"onAndGameHandle",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({page:2}),t={score:this.state.playerScore,play_time:this.state.playerTime},e.next=4,S(this.state.baseID,t);case 4:n=e.sent,console.log(n);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sendAnswerHandle",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,n=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==this.state.question){e.next=3;break}return E("warning","\u0e41\u0e08\u0e49\u0e07\u0e40\u0e15\u0e37\u0e2d\u0e19","\u0e42\u0e1b\u0e23\u0e14\u0e23\u0e2d\u0e04\u0e33\u0e16\u0e32\u0e21"),e.abrupt("return");case 3:if(""!==this.state.answers){e.next=6;break}return E("warning","\u0e41\u0e08\u0e49\u0e07\u0e40\u0e15\u0e37\u0e2d\u0e19","\u0e42\u0e1b\u0e23\u0e14\u0e15\u0e2d\u0e1a\u0e04\u0e33\u0e16\u0e32\u0e21"),e.abrupt("return");case 6:return e.next=8,G("question","\u0e2a\u0e48\u0e07\u0e04\u0e33\u0e15\u0e2d\u0e1a","\u0e2b\u0e21\u0e32\u0e22\u0e40\u0e2b\u0e15\u0e38 \u0e41\u0e15\u0e48\u0e25\u0e30\u0e02\u0e49\u0e2d\u0e04\u0e38\u0e13\u0e08\u0e30\u0e15\u0e2d\u0e1a\u0e44\u0e14\u0e49\u0e40\u0e1e\u0e35\u0e22\u0e07\u0e04\u0e23\u0e31\u0e49\u0e07\u0e40\u0e14\u0e35\u0e22\u0e27\u0e40\u0e17\u0e48\u0e32\u0e19\u0e31\u0e49\u0e19");case 8:t=e.sent,this.setState((function(e){return{playerTime:e.playerTime+(n.state.allTime-n.state.countdown)}})),t.isConfirmed&&(this.setState({question:"",countdown:0}),clearInterval(this.loop),E("success","\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08","\u0e15\u0e2d\u0e1a\u0e04\u0e33\u0e16\u0e32\u0e21\u0e41\u0e25\u0e49\u0e27"));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(P.jsxs)("div",{className:"App",children:[Object(P.jsx)("img",{className:"srisuvit_logo",src:b}),Object(P.jsx)("img",{className:"tower",src:f}),Object(P.jsx)("img",{className:"rocket",src:j}),function(){switch(e.state.page){case 0:return Object(P.jsxs)("header",{className:"App-header",children:[Object(P.jsx)("img",{className:"srisuvit",src:v}),Object(P.jsx)("div",{style:{height:"10vmin"}}),Object(P.jsx)("input",{type:"text",className:"player_name",placeholder:"Player Name",value:e.state.playerName,onChange:function(t){return e.setState({playerName:t.target.value})}}),Object(P.jsx)("div",{style:{height:"3vmin"}}),Object(P.jsx)("input",{type:"text",className:"player_id",placeholder:"Player ID",value:e.state.playerID,onChange:function(t){return e.setState({playerID:t.target.value})}}),Object(P.jsx)("div",{style:{height:"8vmin"}}),Object(P.jsx)("button",{className:"button_start",style:{backgroundImage:"url(".concat(y,")")},onClick:e.startGameHandle})]});case 1:return Object(P.jsxs)("header",{className:"App-header",children:[Object(P.jsx)("div",{className:"countdown",children:Object(P.jsxs)("span",{className:"time",children:["00:",e.state.countdown>9?e.state.countdown:"0".concat(e.state.countdown)]})}),Object(P.jsx)("div",{style:{height:"10vmin"}}),Object(P.jsx)("span",{className:"question_span",children:e.state.question}),Object(P.jsx)("div",{style:{height:"3vmin"}}),Object(P.jsx)("input",{disabled:""===e.state.question,type:"text",className:"answers",placeholder:"\u0e04\u0e33\u0e15\u0e2d\u0e1a",value:e.state.answers,onChange:function(t){return e.setState({answers:t.target.value})}}),Object(P.jsx)("div",{style:{height:"8vmin"}}),Object(P.jsx)("button",{className:"button_ans",style:{backgroundImage:"url(".concat(g,")")},onClick:e.sendAnswerHandle})]});case 2:return Object(P.jsxs)("header",{className:"App-header",children:[Object(P.jsx)("img",{className:"score",src:O}),Object(P.jsx)("div",{style:{height:"10vmin"}}),Object(P.jsx)("span",{className:"palyer_id_span",children:e.state.playerID}),Object(P.jsx)("div",{style:{height:"8vmin"}}),Object(P.jsx)("span",{className:"score_span",children:e.state.playerScore})]})}}()]})}}]),n}(s.a.Component),L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,108)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),r(e),c(e)}))};c.a.render(Object(P.jsx)(s.a.StrictMode,{children:Object(P.jsx)(H,{})}),document.getElementById("root")),L()},2:function(e,t){e.exports=Object.freeze({PLAYER_END_POINT:"http://player.apipole.dev",PLAYER_URL:"/player",GAME_END_POINT:"http://game.apipole.dev",GAME_URL:"/game",SOCKET_IO_END_POINT:"http://socket.apipole.dev"})},56:function(e,t,n){},58:function(e,t,n){}},[[107,1,2]]]);
//# sourceMappingURL=main.48e39c42.chunk.js.map